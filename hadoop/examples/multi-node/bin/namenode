#! /usr/bin/env bash

function start_ssh() {
  /usr/sbin/sshd
}

function start_namenode() {
  su -l hdfs -c '/opt/hadoop/bin/hdfs --daemon start namenode'
}

function start_hdfs() {
  su -l hdfs -c /opt/hadoop/sbin/start-dfs.sh
}

function shutdown() {
  su -l hdfs -c '/opt/hadoop/bin/hdfs --daemon stop namenode'
  su -l hdfs -c /opt/hadoop/sbin/stop-dfs.sh
}

trap shutdown EXIT

start_ssh &&
    start_namenode &&
    echo "Namenode started on $(hostname -i)" &&
    tail -f /dev/null
